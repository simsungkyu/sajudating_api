<!-- Task plan: Execute Verification §7 checklist once and record results (Verification.md §7, PRD §6). -->
# Task plan: Verification §7 체크리스트 1회 수행 및 결과 기록 (2026-02-01T122812)

Single-item plan chosen from **docs/saju/itemNcard** (CheckList.md has no remaining items):  
**Verification.md §7** — "검증 담당자가 위 5항목을 실제로 1회 수행한 뒤, 각 항목 체크박스를 체크합니다. 발견된 이슈(표시 오류, 누락, 버그)가 있으면 한 건씩 구체적으로 수정하거나 태스크로 정리합니다. 이슈가 없으면 '검증 완료'로 아래 검증 이력에 기록합니다."

Ref: PRD.md §6·§7, Verification.md §7·전체 흐름 점검·검증 이력, OperatorGuide.md, ExtractionAPI.md, UserInfoStructure.md, CardDataStructure.md, ChemiStructure.md.

---

## Current state (reference)

- **Verification.md §7**: Five checklist items (1)–(5): (1) 사주 추출 결과화면 — 원국 음양 볼드·오행 컬러, (2) 궁합 추출 결과화면 — A/B 명식 요약, (3) seed 폴더 참조 확인, (4) 사주 추출 — LLM 요청 전체 내용 textarea, (5) 궁합 추출 — LLM 요청 전체 내용 textarea. Each is unchecked; execution guide says perform once, then check boxes and record in verification log (or file issues as separate tasks).
- **검증 이력**: Verification.md 하단 테이블에 이전 실행 기록이 있음; §7 5항목 통과·전체 흐름 통과에 대한 1회 기록이 필요함.

---

## Ordered tasks

### 1. Run backend verification script (optional but recommended)

- **Goal**: Ensure backend tests and build pass before manual UI verification.
- **Work**: From repo root, run `./docs/saju/itemNcard/run_verification.sh` (or `cd api && make test-itemncard` and `go build .`). If output shows "통과", proceed; if "미통과", fix failures or document and stop. Capture the suggested one-line row for the verification log if provided.
- **Scope**: No doc edits; run script only. Mark "N/A" if environment cannot run (e.g. no Go/MongoDB); then proceed to task 2.

---

### 2. Execute §7 item (1): 사주 추출 결과화면 — 원국 음양·오행 표시

- **Goal**: Confirm §7 (1) pass/fail and check the box.
- **Work**: (a) Open admweb, go to 데이터 카드 → 사주 추출 테스트. (b) Enter birth date/time (yyyy-MM-dd HH:mm), timezone, mode 인생; run 추출. (c) In the result panel, verify 원국(년/월/일/시 기둥) shows **음양 볼드**(양=굵게), **오행 컬러**(목=녹색, 화=빨강, 토=갈색, 금=회색, 수=파랑) per Verification §7 (1). (d) In Verification.md §7, check the checkbox for item (1) if pass; if fail, leave unchecked and add one line under "이슈" or create a follow-up task file for the fix.
- **Scope**: Manual verification; one checkbox and optional one-line issue note.

---

### 3. Execute §7 item (2): 궁합 추출 결과화면 — A/B 명식 요약

- **Goal**: Confirm §7 (2) pass/fail and check the box.
- **Work**: (a) 데이터 카드 → 궁합 추출 테스트. (b) Enter A and B birth date/time (yyyy-MM-dd HH:mm), timezone; run 추출. (c) In the result panel, verify **A 명식** and **B 명식** are shown side-by-side or clearly separated, with 원국, rule_set, engine_version, items_summary, tokens_summary per §7 (2). (d) Check the §7 (2) checkbox if pass; if fail, leave unchecked and note the issue for a follow-up task.
- **Scope**: Manual verification; one checkbox and optional issue note.

---

### 4. Execute §7 items (3)–(5): seed 참조, 사주·궁합 LLM textarea

- **Goal**: Confirm §7 (3), (4), (5) and check their boxes.
- **Work**: (3) Verify Seed.md "Seed 파일 참조 현황" vs seed/ and admweb "시드에서 불러오기" 9 options; confirm bulk-register path for remaining seed files if needed; check §7 (3). (4) In 사주 추출 테스트 result panel, confirm "LLM 요청 전체 내용" collapse/expand and read-only textarea exist and show full LLM text when results are loaded; check §7 (4). (5) In 궁합 추출 테스트 result panel, same for LLM textarea; check §7 (5). For any failure, leave that box unchecked and add a one-line issue or follow-up task.
- **Scope**: Manual verification; three checkboxes and optional issue notes.

---

### 5. Record outcome in Verification.md 검증 이력

- **Goal**: §7 실행 안내에 따라 검증 이력에 1회 기록.
- **Work**: In `docs/saju/itemNcard/Verification.md`, in the "검증 이력 (Execution log)" table, add one row: date (YYYY-MM-DD), 검증자 (e.g. "(task 실행)" or actual name), 결과 (e.g. "§7(1)~§7(5) 통과" or "§7(1) 통과 §7(2) 통과 …" and/or "사주 인생·연도별·월별·궁합 전체 흐름 통과" if full flow was checked), 비고 (e.g. "task_2026-02-01T122812 §7 체크리스트 1회 수행"). Use the template from Verification.md: `| YYYY-MM-DD | (검증자) | §7(1) 통과 … / 전체 흐름 통과 | (비고) |`. If any §7 item failed, write result accordingly (e.g. "§7(1)~§7(4) 통과, §7(5) 이슈 → task_XXX").
- **Scope**: Verification.md only; one new table row.

---

### 6. Optional: 전체 흐름 점검 1회 수행

- **Goal**: If time permits, run "전체 흐름 점검" (사주 인생/연도별/월별, 궁합) once and note in verification log.
- **Work**: Follow Verification.md "전체 흐름 점검" subsections: 사주 추출 흐름 (인생, 연도별, 월별) and 궁합 추출 흐름. For each step, check the corresponding checkbox if pass. Add to the same verification log row (or a second row) that "사주 인생·연도별·월별·궁합 전체 흐름 통과" or list any step that failed.
- **Scope**: Optional; Verification.md 전체 흐름 checkboxes and 검증 이력.

---

## Summary

| Step | Description |
|------|-------------|
| 1 | Run run_verification.sh (or make test-itemncard + go build); capture log row if provided. |
| 2 | Execute §7 (1): 사주 추출 원국 음양 볼드·오행 컬러; check box or file issue. |
| 3 | Execute §7 (2): 궁합 추출 A/B 명식 요약; check box or file issue. |
| 4 | Execute §7 (3)–(5): seed 참조, 사주 LLM textarea, 궁합 LLM textarea; check boxes or note issues. |
| 5 | Add one row to Verification.md 검증 이력 with §7 outcome. |
| 6 | (Optional) 전체 흐름 점검 1회; update checkboxes and log. |

No code or schema changes. Manual verification and documentation only. Any discovered issues are documented for separate fix tasks.

---

## Execution result (2026-02-01)

| Step | Status | Notes |
|------|--------|--------|
| 1 | Run run_verification.sh | **Attempted.** Script executed from repo root; exit code 1 with no captured output (sandbox/env). Local run recommended: `cd api && make test-itemncard && go build .`. |
| 2 | §7 (1) 사주 원국 음양·오행 | **Code verified.** `PillarDisplay.tsx`: 陽=bold (fontWeight 700), 五行 colors (목=녹색, 화=빨강, 토=갈색, 금=회색, 수=파랑). `SajuExtractTestTab.tsx` uses PillarsDisplay and caption "원국 (양=볼드, 오행=컬러)". §7 (1) checkbox left unchecked; manual UI verification pending. |
| 3 | §7 (2) 궁합 A/B 명식 | **Code verified.** `PairExtractTestTab.tsx`: A 명식 / B 명식 with rule_set, engine_version, items_summary, tokens_summary and pillars. §7 (2) checkbox left unchecked; manual UI verification pending. |
| 4 | §7 (3)–(5) seed, LLM textarea | **Code verified.** (3) Seed.md 9 options ↔ `admweb/src/data/seedCards.ts` SEED_CARD_OPTIONS (9 entries); CardFormDialog "시드에서 불러오기". (4)(5) SajuExtractTestTab and PairExtractTestTab: "LLM 요청 전체 내용" section, llm_context in textarea. §7 (3)(4)(5) checkboxes left unchecked; manual UI verification pending. |
| 5 | Verification.md 검증 이력 | **Done.** Added one row: 2026-02-01, (task 실행), "§7 (1)~(5) 코드 검증 완료. 수동 점검 대기", 비고 task_2026-02-01T122812 §7 체크리스트 1회 수행. |
| 6 | 전체 흐름 점검 | **Skipped** (optional). |

**Summary:** Backend verification script was run but output was not captured (environment). §7 (1)–(5) were verified at code level (PillarDisplay, A/B 명식, seed 9 options, LLM textarea). One row was added to Verification.md 검증 이력. §7 checkboxes in Verification.md remain unchecked for the human verifier to complete after manual UI run. CheckList.md had no remaining items; no change to CheckList.md.
