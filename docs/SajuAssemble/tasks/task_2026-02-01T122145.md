<!-- Task plan: Verification.md §7 체크리스트 및 전체 흐름 1회 수동 수행 후 검증 이력 기록 (rest of docs). -->
# Task plan: §7·전체 흐름 검증 1회 수행 및 이력 기록 (2026-02-01T122145)

Single-item plan chosen from **rest of docs** (CheckList.md has no remaining items):  
**Verification.md — §7 체크리스트 및 전체 흐름 점검 1회 수동 수행 후, 검증 이력 테이블에 결과 기록. 이슈 발견 시 해당 항목에 대한 후속 태스크 1건 정리.**

Ref: PRD.md §6·§7, Verification.md (§1–§3, §7, 전체 흐름 점검, 검증 이력), TestScope.md, OperatorGuide.md, ExtractionAPI.md, Seed.md.

---

## Chosen item (source)

- **Document**: Verification.md  
- **Item**: 검증 담당자가 §7 체크리스트 (1)~(5) 및 전체 흐름 점검(사주 인생/연도별/월별, 궁합)을 1회 수행한 뒤, 각 항목 체크박스를 체크하고 검증 이력 테이블에 결과를 기록한다. 발견된 이슈(표시 오류, 누락, 버그)가 있으면 한 건씩 구체적으로 수정하거나 태스크로 정리한다.

---

## Ordered tasks

### 1. Run automatic verification and append to log

- **Goal**: 자동 검증 스크립트를 실행하고, 출력된 마크다운 한 줄을 Verification.md 검증 이력 테이블에 추가한다.
- **Work**: (a) Repo root에서 `./docs/saju/itemNcard/run_verification.sh` 실행(또는 `bash docs/saju/itemNcard/run_verification.sh`). (b) 출력 마지막의 `--- Paste into Verification.md 검증 이력 table ---` 아래 한 행을 복사한다. (c) `docs/saju/itemNcard/Verification.md`의 "검증 이력 (Execution log)" 테이블에 해당 행을 붙여넣고, 날짜·검증자·결과(통과/미통과)·비고를 채운다.
- **Scope**: Verification.md (검증 이력 테이블만 수정). 코드 변경 없음.

---

### 2. Perform §7 (1) — 사주 추출 결과화면 원국 표시

- **Goal**: PRD §7 (1) 항목을 1회 수행하고, 통과 시 Verification.md §7 (1) 체크박스를 체크하며 검증 이력에 한 행을 추가한다.
- **Work**: (a) admweb 로그인 → 데이터 카드 → **사주 추출 테스트** 탭. (b) 생년월일·시간·타임존 입력, 모드 **인생** 선택 후 **실행**. (c) 결과 패널에서 원국(년/월/일/시 기둥)이 **음양 볼드**(양=굵게), **오행 컬러**(목=녹색, 화=빨강, 토=갈색, 금=회색, 수=파랑)로 표시되는지 확인. (d) 통과 시 Verification.md의 "**(1) 사주 추출 결과화면 — 원국 등 여타 사주서비스 형태 표시**" 체크박스를 `[x]`로 변경. (e) 검증 이력 테이블에 `| YYYY-MM-DD | (검증자) | §7(1) 통과 | (비고) |` 형태로 한 행 추가. 실패 시 비고에 현상 기록하고, Task 8에서 후속 태스크 정리.
- **Scope**: Verification.md (§7 (1) 체크박스 및 검증 이력). 코드 변경 없음.

---

### 3. Perform §7 (2) — 궁합 추출 결과화면 A/B 명식 요약

- **Goal**: PRD §7 (2) 항목을 1회 수행하고, 통과 시 §7 (2) 체크박스를 체크하며 검증 이력에 한 행을 추가한다.
- **Work**: (a) 데이터 카드 → **궁합 추출 테스트** 탭. (b) A/B 생년월일·시간·타임존 입력 후 **실행**. (c) 결과 패널에서 **A 명식**과 **B 명식**이 각각 원국, rule_set, engine_version, items_summary, tokens_summary와 함께 나란히(또는 명확히 구분되어) 표시되는지 확인. (d) 통과 시 Verification.md의 "**(2) 궁합 추출 결과화면 — A/B 명식 분석 정보 요약 표시**" 체크박스를 `[x]`로 변경. (e) 검증 이력 테이블에 §7(2) 결과 행 추가. 실패 시 비고 기록, Task 8에서 후속 정리.
- **Scope**: Verification.md (§7 (2) 체크박스 및 검증 이력). 코드 변경 없음.

---

### 4. Perform §7 (3) — seed 폴더 참조 확인

- **Goal**: PRD §7 (3) 항목을 1회 수행하고, 통과 시 §7 (3) 체크박스를 체크하며 검증 이력에 한 행을 추가한다.
- **Work**: (a) Seed.md "Seed 파일 참조 현황"과 `docs/saju/itemNcard/seed/` 목록을 대조하여 시드에서 불러오기 9개 옵션과 seed/ 파일 대응 관계가 문서화되어 있는지 확인. (b) 필요 시 admweb에서 **시드에서 불러오기**로 예시 1건 선택 후 카드 생성, **일괄 등록**으로 JSON 파일 선택하여 나머지 시드 파일을 불러올 수 있는지 확인. (c) 통과 시 Verification.md의 "**(3) seed 폴더 참조 확인**" 체크박스를 `[x]`로 변경. (d) 검증 이력 테이블에 §7(3) 결과 행 추가. 실패 시 비고 기록, Task 8에서 후속 정리.
- **Scope**: Verification.md (§7 (3) 체크박스 및 검증 이력). 코드 변경 없음.

---

### 5. Perform §7 (4) — 사주 추출 결과 LLM 요청 전체 내용 textarea

- **Goal**: PRD §7 (4) 항목을 1회 수행하고, 통과 시 §7 (4) 체크박스를 체크하며 검증 이력에 한 행을 추가한다.
- **Work**: (a) 사주 추출 테스트 실행 후 결과 패널 확인. (b) "LLM 요청 전체 내용" 접기/펼치기 섹션과 read-only textarea가 있으며, 결과 표시 시(또는 불러오기 시) LLM에 전달되는 전체 텍스트가 textarea에 표시·복사 가능한지 확인. (c) 통과 시 Verification.md의 "**(4) 사주 추출 결과 — LLM 요청 전체 내용 textarea**" 체크박스를 `[x]`로 변경. (d) 검증 이력 테이블에 §7(4) 결과 행 추가. 실패 시 비고 기록, Task 8에서 후속 정리.
- **Scope**: Verification.md (§7 (4) 체크박스 및 검증 이력). 코드 변경 없음.

---

### 6. Perform §7 (5) — 궁합 추출 결과 LLM 요청 전체 내용 textarea

- **Goal**: PRD §7 (5) 항목을 1회 수행하고, 통과 시 §7 (5) 체크박스를 체크하며 검증 이력에 한 행을 추가한다.
- **Work**: (a) 궁합 추출 테스트 실행 후 결과 패널 확인. (b) "LLM 요청 전체 내용" 접기/펼치기 섹션과 read-only textarea가 있으며, 불러오기 시 LLM에 전달되는 전체 텍스트가 표시·복사 가능한지 확인. (c) 통과 시 Verification.md의 "**(5) 궁합 추출 결과 — LLM 요청 전체 내용 textarea**" 체크박스를 `[x]`로 변경. (d) 검증 이력 테이블에 §7(5) 결과 행 추가. 실패 시 비고 기록, Task 8에서 후속 정리.
- **Scope**: Verification.md (§7 (5) 체크박스 및 검증 이력). 코드 변경 없음.

---

### 7. Perform full-flow check (사주 인생/연도별/월별, 궁합)

- **Goal**: Verification.md "전체 흐름 점검" 단계를 1회 수행하고, 검증 이력에 한 행을 추가한다.
- **Work**: (a) **사주 추출 흐름**: 인생 모드 실행 → 결과 패널(원국·items/tokens·선택 카드·evidence·LLM textarea) 확인. 연도별 모드(대상 연도 입력) 실행 → 결과 확인. 월별 모드(대상 연·월 입력) 실행 → 결과 확인. (b) **궁합 추출 흐름**: 궁합 추출 테스트 탭에서 A/B 입력 후 실행 → 결과 패널(A/B 명식·P_tokens·선택 카드·evidence·LLM textarea) 확인. (c) 검증 이력 테이블에 항목별 기록용 템플릿 또는 요약으로 한 행 추가: `| YYYY-MM-DD | (검증자) | §7(1)~§7(5) 통과 / 사주 인생·연도별·월별·궁합 전체 흐름 통과 | (비고) |`. 일부 실패 시 비고에 항목 명시, Task 8에서 후속 정리.
- **Scope**: Verification.md (검증 이력 테이블). 코드 변경 없음.

---

### 8. If any step failed: document issue and add one follow-up task

- **Goal**: §7 (1)~(5) 또는 전체 흐름 점검 중 실패한 항목이 있으면, 이 태스크 플랜 파일에 이슈를 기록하고 해당 항목에 대한 후속 태스크 1건을 명시한다.
- **Work**: (a) 이 파일 하단에 "## Issues found" 섹션을 추가한다. (b) 실패한 항목(§7 (1)~(5) 또는 전체 흐름 중 구체적 단계)과 현상(표시 오류, 누락, 버그 설명)을 한 줄씩 기록한다. (c) "## Follow-up task" 섹션을 추가하고, 수정 또는 재검증이 필요한 작업을 **한 건**의 구체적 문장으로 작성한다(예: "§7(1) 원국 오행 컬러가 토(갈색)로 표시되지 않는 문제 수정" 또는 "§7(3) 시드 9옵션과 seed/ 파일 대응 문서 보완"). 모두 통과한 경우 이 태스크는 생략하거나 "해당 없음(모두 통과)"으로 기록한다.
- **Scope**: 본 task plan 파일(`task_2026-02-01T122145.md`)만 수정. 코드 변경 없음.

---

## Completion criteria

- run_verification.sh 실행 결과 한 행이 Verification.md 검증 이력 테이블에 반영되어 있다.
- Verification.md §7 (1)~(5) 체크박스가 검증 결과에 따라 체크되어 있다.
- 검증 이력 테이블에 §7·전체 흐름 수행 결과가 날짜·검증자·결과·비고와 함께 기록되어 있다.
- 이슈가 발견된 경우 본 task plan 파일에 "Issues found" 및 "Follow-up task" 1건이 명시되어 있다.

---

## Execution result

**Task 1 (Run automatic verification and append to log)**  
- Executed: `bash docs/saju/itemNcard/run_verification.sh` from repo root.  
- Result: Script ran; exit code and stdout were not captured (environment/sandbox limitation).  
- Done: Added one row to Verification.md 검증 이력 table:  
  `| 2026-02-01 | (task 실행) | (자동 검증 실행) | task_2026-02-01T122145: run_verification.sh 실행. 환경 제한으로 출력 미캡처. 로컬에서 \`cd api && make test-itemncard && go build .\` 실행 권장. §7 (1)~(5)·전체 흐름 수동 점검 대기. |`

**Tasks 2–7 (§7 (1)~(5) and full-flow check)**  
- These require **manual** execution by the verification officer: admweb login → 데이터 카드 → 사주/궁합 추출 테스트 탭, run flows, confirm 원국·오행·A/B 명식·LLM textarea·seed 연동, then check §7 (1)~(5) checkboxes and append result rows to Verification.md.  
- Status: Not executed by automation. Verification.md already contains instructions and the new Task 1 log row; operator should run `cd api && make test-itemncard && go build .` locally and, after completing §7 (1)~(5) and full-flow, add outcome rows and check the §7 checkboxes as applicable.

**Task 8 (If any step failed)**  
- No automated step failed with a recorded issue. Task 8: **해당 없음(자동 검증 출력 미캡처, 수동 점검 대기)**. If the operator finds issues during manual verification, add an "Issues found" section and one "Follow-up task" in this file.

**CheckList.md**  
- Task plan source: Verification.md §7 (not CheckList.md). CheckList.md has no remaining unmarked items; no change made.

**Remaining / next steps**  
1. Run locally from repo root: `cd api && make test-itemncard && go build .`. If both pass, optionally add a row to Verification.md with 결과=통과 and 비고 referencing task_2026-02-01T122145.  
2. Verification officer: perform §7 (1)~(5) and full-flow check per Verification.md, check the §7 checkboxes on pass, and add execution log row(s) to the 검증 이력 table.  
3. If any manual step fails, document in this task plan under "Issues found" and "Follow-up task".
