fragment sajuProfileBasic on SajuProfile {
  uid
  createdAt
  updatedAt
  sex
  birthdate
  palja
  email
  # image
  imageMimeType
  sajuSummary
  sajuContent
  nickname
  phySummary
  phyContent
  myFeatureEyes
  myFeatureNose
  myFeatureMouth
  myFeatureFaceShape
  myFeatureNotes
  partnerEmbeddingText
  partnerMatchTips
  partnerSummary
  partnerFeatureEyes
  partnerFeatureNose
  partnerFeatureMouth
  partnerFeatureFaceShape
  partnerPersonalityMatch
  partnerSex
  partnerAge
  phyPartnerUid
  phyPartnerSimilarity
}

fragment phyIdealPartnerBasic on PhyIdealPartner {
  uid
  createdAt
  updatedAt
  summary
  featureEyes
  featureNose
  featureMouth
  featureFaceShape
  personalityMatch
  sex
  age
  # image
  embeddingModel
  embeddingText
  similarityScore
  hasImage
}

query sajuProfiles($input: SajuProfileSearchInput!) {
  sajuProfiles(input: $input) {
    ok
    msg
    nodes {
      ... on SajuProfile {
        ...sajuProfileBasic
      }
    }
  }
}

query sajuProfile($uid: String!) {
  sajuProfile(uid: $uid) {
    ok
    node {
      ... on SajuProfile {
        ...sajuProfileBasic
      }
    }
  }
}

query sajuProfileSimilarPartners($uid: String!, $limit: Int!, $offset: Int!) {
  sajuProfileSimilarPartners(uid: $uid, limit: $limit, offset: $offset) {
    ok
    nodes {
      ... on PhyIdealPartner {
        ...phyIdealPartnerBasic
      }
    }
  }
}

query phyIdealPartners($input: PhyIdealPartnerSearchInput!) {
  phyIdealPartners(input: $input) {
    ok
    msg
    nodes {
      ... on PhyIdealPartner {
        ...phyIdealPartnerBasic
      }
    }
  }
}

query phyIdealPartner($uid: String!) {
  phyIdealPartner(uid: $uid) {
    ok
    node {
      ... on PhyIdealPartner {
        ...phyIdealPartnerBasic
      }
    }
  }
}

query sajuProfileLogs($input: SajuProfileLogSearchInput!) {
  sajuProfileLogs(input: $input) {
    ok
    msg
    nodes {
      ... on SajuProfileLog {
        uid
        createdAt
        status
        text
      }
    }
  }
}

fragment aiMetaBasic on AiMeta {
  uid
  createdAt
  updatedAt
  name
  desc
  metaType
  prompt
  model
  temperature
  maxTokens
  size
  inUse
}

query aiMetas($input: AiMetaSearchInput!) {
  aiMetas(input: $input) {
    ok
    nodes {
      ... on AiMeta {
        ...aiMetaBasic
      }
    }
  }
}

mutation putAiMeta($input: AiMetaInput!) {
  putAiMeta(input: $input) {
    ok
    uid
    msg
  }
}

mutation setAiMetaInUse($uid: String!) {
  setAiMetaInUse(uid: $uid) {
    ok
    err
    msg
  }
}

mutation delAiMeta($uid: String!) {
  delAiMeta(uid: $uid) {
    ok
    msg
  }
}

fragment aiExecutionBasic on AiExecution {
  uid
  status
  metaUid
  metaType
  prompt
  valued_prompt
  inputkvs {
    k
    v
  }
  outputkvs {
    k
    v
  }
  model
  temperature
  maxTokens
  size
  inputImageBase64
  outputText
  errorMessage
  outputImageBase64
  createdAt
  updatedAt
  elapsedTime
  inputTokens
  outputTokens
  totalTokens
  runBy
  runSajuProfileUid
}

query aiExecution($uid: String!) {
  aiExecution(uid: $uid) {
    ok
    node {
      ... on AiExecution {
        ...aiExecutionBasic
        
      }
    }
  }
}

query aiExecutions($input: AiExecutionSearchInput!) {
  aiExecutions(input: $input) {
    ok
    msg
    total
    limit
    offset
    nodes {
      ... on AiExecution {
        ...aiExecutionBasic
      }
    }
  }
}

mutation runAiExecution($input: AiExcutionInput!) {
  runAiExecution(input: $input) {
    ok
    uid
    err
    msg
    # dont query value and base64Value in graphql
  }
}

query getAiMetaTypes {
  aiMetaTypes {
    ok
    nodes {
      ... on AiMetaType {
        type
        inputFields
        outputFields
        hasInputImage
        hasOutputImage
      }
    }
  }
}

query getAiMetaKVs($input: AiMetaKVsInput!) {
  aiMetaKVs(input: $input) {
    ok
    err
    msg
    value
    kvs {
      k
      v
    }
  }
}

query palja($birthdate: String!, $timezone: String!) {
  palja(birthdate: $birthdate, timezone: $timezone) {
    ok
    value
  }
}

mutation login($email: String!, $password: String!, $otp: String!) {
  login(email: $email, password: $password, otp: $otp) {
    ok
    value
    err
    msg
  }
}

fragment adminUserBasic on AdminUser {
  uid
  createdAt
  updatedAt
  username
  email
  isActive
}

query adminUsers {
  adminUsers {
    ok
    err
    msg
    total
    limit
    offset
    nodes {
      ... on AdminUser {
        ...adminUserBasic
      }
    }
  }
}

mutation createAdminUser($email: String!, $password: String!) {
  createAdminUser(email: $email, password: $password) {
    ok
    uid
    value
    err
    msg
  }
}

mutation setAdminUserActive($uid: String!, $active: Boolean!) {
  setAdminUserActive(uid: $uid, active: $active) {
    ok
    err
    msg
  }
}

mutation updateAdminUser($uid: String!, $email: String!, $password: String!) {
  updateAdminUser(uid: $uid, email: $email, password: $password) {
    ok
    err
    msg
  }
}

fragment localLogBasic on LocalLog {
  uid
  createdAt
  expiresAt
  status
  text
}

query localLogs($input: LocalLogSearchInput!) {
  localLogs(input: $input) {
    ok
    msg
    total
    limit
    offset
    nodes {
      ... on LocalLog {
        ...localLogBasic
      }
    }
  }
}

fragment systemStatsBasic on SystemStats {
  hostname
  cpuUsage
  memoryUsage
  memoryTotal
}

query systemStats {
  systemStats {
    ok
    node {
      ... on SystemStats {
        ...systemStatsBasic
      }
    }
  }
}

fragment itemnCardBasic on ItemNCard {
  uid
  cardId
  version
  status
  ruleSet
  scope
  title
  category
  tags
  domains
  priority
  triggerJson
  scoreJson
  contentJson
  cooldownGroup
  maxPerUser
  debugJson
  deletedAt
  createdAt
  updatedAt
}

query itemnCards($input: ItemNCardSearchInput!) {
  itemnCards(input: $input) {
    ok
    msg
    total
    limit
    offset
    nodes {
      ... on ItemNCard {
        ...itemnCardBasic
      }
    }
  }
}

query itemnCard($uid: String) {
  itemnCard(uid: $uid) {
    ok
    msg
    node {
      ... on ItemNCard {
        ...itemnCardBasic
      }
    }
  }
}

mutation createItemnCard($input: ItemNCardInput!) {
  createItemnCard(input: $input) {
    ok
    uid
    msg
  }
}

mutation updateItemnCard($uid: String!, $input: ItemNCardInput!) {
  updateItemnCard(uid: $uid, input: $input) {
    ok
    msg
  }
}

mutation deleteItemnCard($uid: String!) {
  deleteItemnCard(uid: $uid) {
    ok
    msg
  }
}

mutation runSajuGeneration($input: SajuGenerationRequest!) {
  runSajuGeneration(input: $input) {
    targets {
      kind
      period
      max_chars
      result
    }
  }
}

mutation runChemiGeneration($input: ChemiGenerationRequest!) {
  runChemiGeneration(input: $input) {
    targets {
      perspective
      max_chars
      result
    }
  }
}
